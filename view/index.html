<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="plot.js"></script>
    <script src="websocket.js"></script>
    <title>Tracker</title>
    <style>
        body {
            margin: 0;
        }

        section {
            display: flex;
            align-items: center;
            height: 10vh;
        }

        section * {
            margin: 10px;
        }

        .slider {
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="plot" style="width:100%;height:90vh;"></div>
    <section>
        <button class="spacing">Play</button>
        <span id="time"></span>
        <input id="slider" class="slider" type="range" min="0" max="100" value="0">
    </section>
    <script>
        const trace_path = {
            type: 'scattermapbox',
            mode: 'markers+lines',
            name: 'path',
            marker: {
                color: 'blue',
                size: 12,
            }
        };
        const trace_trackers = {
            type: 'scattermapbox',
            mode: 'markers+lines',
            name: 'trackers',
            marker: {
                color: 'red',
                size: 15,
            }
        };
        const trace_target = {
            type: 'scattermapbox',
            mode: 'markers',
            name: 'target',
            marker: {
                color: 'green',
                size: 15,
            }
        };
        const trace_guess = {
            type: 'scattermapbox',
            mode: 'markers+lines',
            name: 'target_guess',
            marker: {
                color: 'purple',
                size: 15,
            }
        };

        const plot_data = [trace_path, trace_trackers, trace_target, trace_guess];
        const plot_layout = {
            showlegend: true,
            margin: { l: 0, t: 0, b: 0, r: 0 },
            mapbox: {
                center: { 'lat': 0, 'lon': 0 },
                style: 'open-street-map',
                zoom: 1
            }
        }
        const plot_config = { responsive: true , displayModeBar: false}

        plot = new Plot('plot', plot_data, plot_layout, plot_config);

        const slider = document.getElementById("slider");
        const output = document.getElementById("time");
        output.innerHTML = slider.value;

        slider.oninput = function () {
            output.innerHTML = parseFloat(this.value).toFixed(1);
        };
    </script>
</body>

</html>